{%extends 'Portfolios/base_portfolio.html' %}
{%load staticfiles%}
{% load cloudinary %}
{% load get_range %}

{%block portfolio_css%}
	<link rel='stylesheet' type='text/css' href ="{%static "Portfolios/css/story.css"%}"/>
{%endblock%}

{%block portfolio_header%}
	<div id="name-wrapper">
		<h2>{{design_story.name}}</h2>
	</div>
	<div id="by-wrapper">
		<img src="{%cloudinary_url request.session.prof_pic width='200' height='200'%}" class="img-responsive img-circle" nopin='nopin'>
		<p class="lead">By <a href="{%url 'Portfolios:render_portfolio' subdomain%}">{{ request.session.designer_name }}</a></p>
	</div>
	<div id="desc-wrapper">
		<h3>About this piece</h3>
		<p class="lead">{{design_story.description}}</p>
	</div>
	</div>
{%endblock%}


{%block portfolio_content%}
	<div id="chapter-list">
		{%for chapter in entries%}
			<div id="date-wrapper">
				<!-- TODO get date of entry -->
				<p class="lead text-center">{{chapter.date}}</p>
			</div>
			<div class="row">
				<div class="col-xs-12 cover-img">
					<!-- TODO get cover image -->
					{%cloudinary chapter.cover_photo width='800' height='600' class='img-responsive'%}
				</div>
			</div>
			<div class="row">
				{% for i in chapter.num_photos|get_range %}
					{% with j=i|stringformat:'s'%}
					<div class="col-xs-4 col-sm-3 col-lg-2">
		  				{%cloudinary chapter.bucket_link|add:"/"|add:j width='600' height='800' class='img-responsive'%}
	  				</div>
	  				{%endwith%}
  				{% endfor %}
			</div>
			<div class="content-wrapper">
				<!-- TODO  put chapter description in this p tag -->
				<p class="lead text-justify">{{chapter.context}}</p>
				<h1 class="text-center"><span class="glyphicon glyphicon-menu-down" aria-hidden="true"></span></h1>
			</div>
		{%endfor%}
	</div>
{%endblock%}