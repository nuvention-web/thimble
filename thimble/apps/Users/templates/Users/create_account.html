{% extends 'Users/base_users.html' %}

{% load staticfiles %}
{% load cloudinary %}

{%block cloudinary%}
    {% cloudinary_includes %}
    {% cloudinary_js_config %}

    <script>
        $(function () {
            $('#direct_upload input[type="file"]').fileupload({
                dropZone: '#direct_upload',

                progress: function () {
                    $('.status_value').text('Uploading...');
                },
            }).on('cloudinarydone', function (e, data) {
                $('.status_value').text('Upload Complete! Finish creating your account by clicking Register');
            });
        });
    </script>
    
{% endblock %}

{%block users_css%}
    <link rel='stylesheet' type='text/css' href ="{%static 'Users/css/login.css'%}"/>
{%endblock%}

{% block content %}
    <div id='direct_upload'>
        <form action="{%url 'Users:create_account' %}" method='POST' enctype="multipart/form-data">
            {%csrf_token%}
            {% for field in user_form %}
                <div class = 'form-group'>
                    <div>{{field.errors|striptags}}</div>
                    {{field.label_tag}}
                    {{field}}
                </div>
            {% endfor %}
            {%for field in designer_form%}
                <div class = 'form-group'>
                    <div>{{field.errors|striptags}}</div>
                    {{field.label_tag}}
                    {{field}}
                </div>
            {%endfor%} 
            <button type = 'submit' class = 'btn btn-primary'>Register</button>
        </form>
    </div>
    <div class='status'>
        <h2>Status</h2>
        <div class='status_value'>
            {{error}}
        </div>
    </div>

{% endblock %}
